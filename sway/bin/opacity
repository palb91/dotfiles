#!/bin/sh
# Restart transparency on sway reload
# exec_always $bin/opacity

bin=/usr/share/sway-git/scripts/inactive-windows-transparency.py

IFS=$'\n' processes=( $(pgrep -U$USER -a) )

echo > /tmp/out
for proc in "${processes[@]}"; do
    IFS=' ' p=( ${proc} )
    [[ "${p[1]}" =~ python$ ]] && [[ "${p[2]}" == "${bin}" ]] || continue
    kill "${p[0]}"
done

exec "${bin}" "${@}"
